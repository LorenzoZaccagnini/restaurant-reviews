!function o(u,i,l){function s(n,e){if(!i[n]){if(!u[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var a=i[n]={exports:{}};u[n][0].call(a.exports,function(e){var t=u[n][1][e];return s(t||e)},a,a.exports,o,u,i,l)}return i[n].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({1:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();!function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}r(n,[{key:"openDatabase",value:function(){if(!navigator.serviceWorker)return Promise.resolve()}}],[{key:"fetchRestaurants",value:function(t){fetch(n.DATABASE_URL,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){return t(null,e)}).catch(function(e){return t(e,null)})}},{key:"fetchRestaurantById",value:function(r,a){n.fetchRestaurants(function(e,t){if(e)a(e,null);else{var n=t.find(function(e){return e.id==r});n?a(null,n):a("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(r,a){n.fetchRestaurants(function(e,t){if(e)a(e,null);else{var n=t.filter(function(e){return e.cuisine_type==r});a(null,n)}})}},{key:"fetchRestaurantByNeighborhood",value:function(r,a){n.fetchRestaurants(function(e,t){if(e)a(e,null);else{var n=t.filter(function(e){return e.neighborhood==r});a(null,n)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(r,a,o){n.fetchRestaurants(function(e,t){if(e)o(e,null);else{var n=t;"all"!=r&&(n=n.filter(function(e){return e.cuisine_type==r})),"all"!=a&&(n=n.filter(function(e){return e.neighborhood==a})),o(null,n)}})}},{key:"fetchNeighborhoods",value:function(a){n.fetchRestaurants(function(e,n){if(e)a(e,null);else{var r=n.map(function(e,t){return n[t].neighborhood}),t=r.filter(function(e,t){return r.indexOf(e)==t});a(null,t)}})}},{key:"fetchCuisines",value:function(a){n.fetchRestaurants(function(e,n){if(e)a(e,null);else{var r=n.map(function(e,t){return n[t].cuisine_type}),t=r.filter(function(e,t){return r.indexOf(e)==t});a(null,t)}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e){return"/img/"+e.photograph+".jpg"}},{key:"mapMarkerForRestaurant",value:function(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:n.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337/restaurants"}}])}()},{}],2:[function(e,t,n){"use strict";var r,a=e("./dbhelper"),i=(r=a)&&r.__esModule?r:{default:r};document.addEventListener("DOMContentLoaded",function(e){o(),l()});var o=function(){i.default.fetchNeighborhoods(function(e,t){e?console.error(e):(self.neighborhoods=t,u())})},u=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,a=document.getElementById("neighborhoods-select");r.forEach(function(e,t){var n=document.createElement("option");n.innerHTML=e,n.value=e,n.setAttribute("role","option"),n.setAttribute("aria-posinset",t+1),n.setAttribute("aria-setsize",r.length),a.append(n)})},l=function(){i.default.fetchCuisines(function(e,t){e?console.error(e):(self.cuisines=t,s())})},s=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,a=document.getElementById("cuisines-select");r.forEach(function(e,t){var n=document.createElement("option");n.innerHTML=e,n.value=e,n.setAttribute("role","option"),n.setAttribute("aria-posinset",t+1),n.setAttribute("aria-setsize",r.length),a.append(n)})};window.initMap=function(){self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),c()};var c=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,r=t.selectedIndex,a=e[n].value,o=t[r].value;i.default.fetchRestaurantByCuisineAndNeighborhood(a,o,function(e,t){e?console.error(e):(f(t),d())})},f=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(function(e){return e.setMap(null)}),self.markers=[],self.restaurants=e},d=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(h(e))}),m()},h=function(e){var t=document.createElement("li");t.setAttribute("role","listitem");var n=document.createElement("img");n.className="restaurant-img",n.src=i.default.imageUrlForRestaurant(e),n.alt=e.name+" restaurant's photo.",t.append(n);var r=document.createElement("h2");r.innerHTML=e.name,r.tabIndex=0,r.setAttribute("aria-label",e.name+" , "+e.neighborhood),t.append(r);var a=document.createElement("p");a.innerHTML=e.neighborhood,t.append(a);var o=document.createElement("p");o.innerHTML=e.address,t.append(o);var u=document.createElement("a");return u.innerHTML="View Details",u.href=i.default.urlForRestaurant(e),u.setAttribute("aria-label","View details of "+e.name+"'s restaurant"),t.append(u),t},m=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=i.default.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",function(){window.location.href=t.url}),self.markers.push(t)})}},{"./dbhelper":1}]},{},[2,1]);
//# sourceMappingURL=maps/main_bundle.js.map
